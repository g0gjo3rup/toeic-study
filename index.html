<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC 30Â§©ÂØ¶Êà∞ÁâπË®ì PRO</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --wrong: #e74c3c; --bg: #f3f4f6; --text: #333; --card-bg: #ffffff; }
        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--bg); color: var(--text); padding: 0; line-height: 1.6; margin: 0; }
        .container { width: 100%; max-width: 100%; margin: 0; background: var(--card-bg); padding: 15px; box-sizing: border-box; }
        h1 { color: var(--primary); text-align: center; border-bottom: 3px solid var(--accent); padding-bottom: 10px; margin: 10px 0 20px 0; font-size: 1.4em; }
        .tabs { display: flex; background: #eee; padding: 5px; border-radius: 8px; margin-bottom: 20px; }
        .tab { flex: 1; text-align: center; padding: 12px; cursor: pointer; font-weight: bold; color: #666; border-radius: 6px; }
        .tab.active { background: white; color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .view-section { display: none; }
        .view-section.active { display: block; }
        .controls { background: #eef2f5; padding: 15px; border-radius: 10px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 25px; border: 1px solid #dee2e6; }
        select { padding: 12px; font-size: 16px; border-radius: 6px; border: 1px solid #ccc; width: 100%; }
        button { padding: 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 15px; font-weight: bold; color: white; background: var(--primary); }
        .btn-accent { background: var(--accent); }
        .word-list { list-style: none; padding: 0; margin: 0; }
        .word-item { padding: 20px 0; border-bottom: 1px solid #eee; width: 100%; }
        .word-header { display: flex; align-items: baseline; flex-wrap: wrap; gap: 8px; margin-bottom: 8px; }
        .index-num { color: #aaa; font-weight: bold; font-size: 0.9em; }
        .en-word { font-size: 1.6em; font-weight: 700; color: var(--primary); }
        .phnetic { color: #7f8c8d; font-family: Arial; font-size: 1em; }
        .pos-tag { background: #e0e0e0; color: #555; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; }
        .stars { color: #f1c40f; font-size: 1.1em; letter-spacing: 2px; }
        .ch-meaning { color: #c0392b; font-weight: bold; font-size: 1.2em; }
        .btn-audio { background: white; border: 1px solid #ddd; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }
        .word-rel { font-size: 0.9em; color: #666; background: #f1f2f6; padding: 8px 12px; border-radius: 4px; margin: 10px 0; border-left: 4px solid #bdc3c7; width: 100%; box-sizing: border-box; }
        .sentence-box { background: #fff8e1; border: 1px solid #fae588; padding: 12px; border-radius: 6px; font-size: 1em; width: 100%; box-sizing: border-box; }
        .en-sent { display: block; font-weight: 500; color: #2c3e50; margin-bottom: 5px; }
    </style>
</head>
<body>
<div class="container">
    <h1>TOEIC 30Â§©ÂØ¶Êà∞ÁâπË®ì PRO</h1>
    <div class="tabs">
        <div class="tab active" onclick="switchTab('study')">üìñ ËÉåÂñÆÂ≠ó</div>
        <div class="tab" onclick="switchTab('quiz')">‚öîÔ∏è Ê∏¨È©ó</div>
    </div>
    <div id="studySection" class="view-section active">
        <div class="controls"><select id="daySelector" onchange="renderWords()"></select></div>
        <ul class="word-list" id="wordList"></ul>
    </div>
    <div id="quizSection" class="view-section">
        <div id="quizStartScreen" class="controls"><select id="quizScopeSelector"></select><button class="btn-accent" onclick="startQuiz()">ÈñãÂßãÊ∏¨È©ó</button></div>
        <div id="quizArea" style="display:none;"></div>
        <div id="quizControls" style="display:none; text-align:center;"><button class="btn-accent" onclick="submitQuiz()" style="width:100%;">‰∫§Âç∑</button></div>
        <div id="quizResult" style="display:none;"><div id="resultList"></div><button class="btn-primary" onclick="resetQuiz()" style="width:100%; margin-top:20px;">ÈáçÊñ∞ÈñãÂßã</button></div>
    </div>
</div>

<script>
    // ‚òÖ ÈÄôË£°Áõ¥Êé•ÊîæÂÖ• Day 1 Ë≥áÊñôÔºåÁ¢∫‰øù‰∫∫‰∫∫ÊâìÈñãÈÉΩÊúâÂÖßÂÆπ
    let db = {"1":[{"w":"hire","s":3,"p":"/ha…™r/","pos":"v.","m":"ÈõáÁî®","rel":"[Ë°ç] hiring n. ÈõáÁî®; [Âèç] fire v. Ëß£ÂÉ±","ex":"We aim to hire three new engineers.","ch":"ÊàëÂÄëÁõÆÊ®ôÊòØÈõáÁî®‰∏â‰ΩçÊñ∞Â∑•Á®ãÂ∏´„ÄÇ"},{"w":"recruit","s":2,"p":"/r…™Ààkrut/","pos":"v.","m":"ÊãõÂãü","rel":"[Ë°ç] recruitment n. ÊãõÂãü; recruiter n. ÊãõËÅò‰∫∫Âì°","ex":"The firm recruits from top universities.","ch":"ÈÄôÈñìÂÖ¨Âè∏ÂæûÈ†ÇÂ∞ñÂ§ßÂ≠∏ÊãõÂãü‰∫∫Êâç„ÄÇ"}]};

    const themes = {"1":"Day 01: ÈõáÁî®/Èù¢Ë©¶","2":"Day 02: Â∑•‰ΩúÂÖßÂÆπ","3":"Day 03: Ëñ™Ë≥áÁ¶èÂà©","4":"Day 04: ÂúòÈöäÂêà‰Ωú","5":"Day 05: ÂÖ•ËÅ∑Ë¶èÂÆö"};

    function init() {
        const saved = localStorage.getItem('toeicProV3');
        if (saved) { try { db = {...db, ...JSON.parse(saved)}; } catch(e){} }
        updateMenus();
        renderWords();
    }

    function updateMenus() {
        const daySel = document.getElementById('daySelector');
        const quizSel = document.getElementById('quizScopeSelector');
        daySel.innerHTML = ""; quizSel.innerHTML = "";
        Object.keys(db).sort((a,b)=>a-b).forEach(d => {
            daySel.add(new Option(themes[d] || `Day ${d}`, d));
            quizSel.add(new Option(`Ê∏¨È©ó Day ${d}`, d));
        });
    }

    function renderWords() {
        const d = document.getElementById('daySelector').value;
        const list = document.getElementById('wordList');
        list.innerHTML = ""; 
        if(!db[d]) return;
        db[d].forEach((item, index) => {
            const li = document.createElement('li');
            li.className = "word-item";
            li.innerHTML = `
                <div class="word-header">
                    <span class="index-num">${index + 1}.</span>
                    <span class="en-word">${item.w}</span>
                    <button class="btn-audio" onclick="playAudio('${item.w}')">üîä</button>
                    <span class="phnetic">${item.p || ""}</span>
                    <span class="pos-tag">${item.pos}</span>
                    <span class="stars">${"‚òÖ".repeat(item.s || 1)}</span>
                    <span class="ch-meaning">${item.m}</span>
                </div>
                ${item.rel ? `<div class="word-rel">${item.rel}</div>` : ""}
                <div class="sentence-box">
                    <span class="en-sent">${item.ex}</span>
                    <span style="color:#666; font-size:0.9em;">${item.ch}</span>
                </div>`;
            list.appendChild(li);
        });
    }

    function playAudio(t) { window.speechSynthesis.cancel(); const u = new SpeechSynthesisUtterance(t); u.lang='en-US'; u.rate=0.8; window.speechSynthesis.speak(u); }
    function switchTab(t) {
        document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
        document.querySelectorAll('.view-section').forEach(x => x.classList.remove('active'));
        if(t==='study') { document.querySelector('.tab:nth-child(1)').classList.add('active'); document.getElementById('studySection').classList.add('active'); }
        else { document.querySelector('.tab:nth-child(2)').classList.add('active'); document.getElementById('quizSection').classList.add('active'); }
    }

    let curQ = []; let userAns = {};
    function startQuiz() {
        let pool = db[document.getElementById('quizScopeSelector').value] || [];
        if(pool.length < 2) return alert("Ë≥áÊñô‰∏çË∂≥");
        curQ = pool.slice(0, 10).map(t => {
            const dis = pool.filter(w=>w.w!==t.w).slice(0,3).map(d=>d.w);
            return {q: `„Äå${t.m}„ÄçÁöÑËã±ÊñáÊòØÔºü`, c: t.w, opts: [t.w, ...dis].sort(()=>Math.random()-0.5), data: t};
        });
        userAns = {}; document.getElementById('quizStartScreen').style.display='none';
        document.getElementById('quizArea').style.display='block'; document.getElementById('quizControls').style.display='block';
        document.getElementById('quizArea').innerHTML = curQ.map((q, i) => `<div style='background:#fff;padding:15px;margin-bottom:10px;border-radius:8px;'>${i+1}. ${q.q}<br>${q.opts.map(o=>`<button onclick="userAns[${i}]='${o}';this.parentElement.querySelectorAll('button').forEach(b=>b.style.background='#fff');this.style.background='#eee';" style="display:block;width:100%;margin-top:5px;background:#fff;border:1px solid #ddd;color:#333;text-align:left;padding:10px;">${o}</button>`).join('')}</div>`).join('');
    }
    function submitQuiz() {
        let sc = 0;
        curQ.forEach((q, i) => { if(userAns[i] === q.c) sc++; });
        document.getElementById('resultList').innerHTML = `<h2 style='text-align:center'>ÂæóÂàÜ: ${Math.round(sc/curQ.length*100)}</h2>`;
        document.getElementById('quizArea').style.display='none'; document.getElementById('quizControls').style.display='none'; document.getElementById('quizResult').style.display='block';
    }
    function resetQuiz(){ document.getElementById('quizStartScreen').style.display='flex'; document.getElementById('quizResult').style.display='none'; }
    init();
</script>
</body>
</html>
