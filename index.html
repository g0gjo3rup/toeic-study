<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC 30Â§©ÂØ¶Êà∞ÁâπË®ì (PROÁµÇÊ•µÁâà)</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --wrong: #e74c3c; --bg: #f3f4f6; --text: #333; --card-bg: #ffffff; }
        body { font-family: "Segoe UI", "Microsoft JhengHei", sans-serif; background: var(--bg); color: var(--text); padding: 15px; line-height: 1.6; margin: 0; }
        .container { max-width: 800px; margin: 0 auto; background: var(--card-bg); padding: 20px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.08); }
        h1 { color: var(--primary); text-align: center; border-bottom: 3px solid var(--accent); padding-bottom: 10px; font-size: 1.5em; }
        .tabs { display: flex; background: #eee; padding: 5px; border-radius: 8px; margin-bottom: 15px; }
        .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; font-weight: bold; color: #666; border-radius: 6px; }
        .tab.active { background: white; color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .view-section { display: none; }
        .view-section.active { display: block; }
        .controls { background: #eef2f5; padding: 15px; border-radius: 10px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; border: 1px solid #dee2e6; }
        select { padding: 12px; font-size: 16px; border-radius: 6px; border: 1px solid #ccc; width: 100%; }
        button { padding: 12px; border-radius: 6px; border: none; cursor: pointer; font-size: 15px; font-weight: bold; color: white; background: var(--primary); }
        .btn-accent { background: var(--accent); }
        .word-list { list-style: none; padding: 0; }
        .word-item { padding: 15px 0; border-bottom: 1px solid #eee; }
        .word-header { display: flex; align-items: center; flex-wrap: wrap; gap: 5px; margin-bottom: 5px; }
        .en-word { font-size: 1.4em; font-weight: 700; color: var(--primary); }
        .phonetic { color: #7f8c8d; font-size: 0.9em; font-family: Arial; }
        .pos-tag { background: #e0e0e0; color: #555; padding: 1px 6px; border-radius: 4px; font-size: 0.75em; }
        .ch-meaning { color: #c0392b; font-weight: bold; font-size: 1.1em; }
        .stars { color: #f1c40f; letter-spacing: 1px; }
        .btn-audio { background: #fff; border: 1px solid #ddd; border-radius: 50%; width: 28px; height: 28px; cursor: pointer; font-size: 14px; }
        .word-rel { font-size: 0.85em; color: #666; background: #f1f2f6; padding: 4px 8px; border-radius: 4px; border-left: 3px solid #bdc3c7; margin: 5px 0; }
        .sentence-box { background: #fafafa; border: 1px dashed #ccc; padding: 10px; font-size: 0.9em; border-radius: 6px; }
        .quiz-card { background: #fff; padding: 20px; margin-bottom: 15px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 1px solid #eee; position: relative; }
        .quiz-tag { position: absolute; top: 0; right: 0; background: var(--primary); color: white; padding: 3px 10px; font-size: 0.7em; border-bottom-left-radius: 8px; }
        .quiz-options { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 15px; }
        .option-btn { background: white; border: 2px solid #e0e0e0; padding: 12px; cursor: pointer; border-radius: 8px; text-align: left; }
        .option-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .result-item { padding: 15px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 10px; background: white; }
        .correct { border-left: 5px solid var(--accent); }
        .wrong { border-left: 5px solid var(--wrong); }
    </style>
</head>
<body>
<div class="container">
    <h1>TOEIC 30Â§©ÂØ¶Êà∞ÁâπË®ì PRO</h1>
    <div class="tabs">
        <div class="tab active" onclick="switchTab('study')">üìñ ÂñÆÂ≠ó</div>
        <div class="tab" onclick="switchTab('quiz')">‚öîÔ∏è Ê∏¨È©ó</div>
    </div>
    <div id="studySection" class="view-section active">
        <div class="controls"><select id="daySelector" onchange="renderWords()"></select></div>
        <ul class="word-list" id="wordList"></ul>
    </div>
    <div id="quizSection" class="view-section">
        <div id="quizStartScreen" class="controls">
            <select id="quizScopeSelector"></select>
            <button class="btn-accent" onclick="startQuiz()">ÈñãÂßãÊ∏¨È©ó</button>
        </div>
        <div id="quizArea" style="display:none;"></div>
        <div id="quizControls" style="display:none; text-align:center; margin-top:10px;"><button class="btn-accent" onclick="submitQuiz()">‰∫§Âç∑</button></div>
        <div id="quizResult" style="display:none;">
            <div style="display:flex; gap:10px; margin-bottom:15px; text-align:center;">
                <div style="flex:1; background:#fff; border:1px solid #ddd; padding:10px; border-radius:8px;">ÂàÜÊï∏<br><b id="scoreBoard" style="font-size:1.5em;">0</b></div>
                <div style="flex:1; background:#fff; border:1px solid #ddd; padding:10px; border-radius:8px;">È°åÊï∏<br><b id="correctCount" style="font-size:1.5em;">0/0</b></div>
            </div>
            <div id="resultList"></div>
            <button onclick="resetQuiz()" style="width:100%; background:var(--accent);">ÈáçÊñ∞ÈñãÂßã</button>
        </div>
    </div>
</div>

<script>
    // ÈÄôË£°ÊîæÂÖ• Day 1 Âà∞ Day 30 ÁöÑË≥áÊñô (Ê≠§ËôïÂÉÖÁ§∫ÁØÑ Day 1, Ë´ãËá™Ë°åÂ∞á‰πãÂâçÁîüÊàêÁöÑË≥áÊñôË≤ºÂÖ• db ËÆäÊï∏)
    let db = {
        "1": [
            {"w":"hire", "s":3, "p":"/ha…™r/", "pos":"v.", "m":"ÈõáÁî®", "rel":"[Ë°ç] hiring n. ÈõáÁî®", "ex":"We aim to hire three new engineers.", "ch":"ÊàëÂÄëÁõÆÊ®ôÊòØÈõáÁî®‰∏â‰ΩçÊñ∞Â∑•Á®ãÂ∏´„ÄÇ"},
            {"w":"recruit", "s":2, "p":"/r…™Ààkrut/", "pos":"v.", "m":"ÊãõÂãü", "rel":"[Ë°ç] recruitment n. ÊãõÂãü", "ex":"The firm recruits from top universities.", "ch":"ÈÄôÈñìÂÖ¨Âè∏ÂæûÈ†ÇÂ∞ñÂ§ßÂ≠∏ÊãõÂãü‰∫∫Êâç„ÄÇ"},
            {"w":"candidate", "s":3, "p":"/Ààk√¶nd…™Àåde…™t/", "pos":"n.", "m":"ÂÄôÈÅ∏‰∫∫", "rel":"[Âêå] applicant", "ex":"He is the strongest candidate so far.", "ch":"‰ªñÊòØÁõÆÂâçÁÇ∫Ê≠¢ÊúÄÂº∑ÁöÑÂÄôÈÅ∏‰∫∫„ÄÇ"}
        ]
        // ... Ê≠§ËôïÊáâË≤ºÂÖ•ÊâÄÊúâ Day Ë≥áÊñô ...
    };

    const themes = {"1":"Day 01: ÈõáÁî®/Èù¢Ë©¶","2":"Day 02: Â∑•‰ΩúÂÖßÂÆπ","3":"Day 03: Ëñ™Ë≥áÁ¶èÂà©","4":"Day 04: ÂúòÈöäÂêà‰Ωú","5":"Day 05: ÂÖ•ËÅ∑Ë¶èÂÆö","6":"Day 06: ÊúçË£ùË¶èÂÆö","7":"Day 07: Èä∑ÂîÆÁ≠ñÁï•","8":"Day 08: ÂúãÈöõË°åÈä∑","9":"Day 09: Á∂ìÊøüË∂®Âã¢","10":"Day 10: Ë≥ºÁâ©È´òÊâã","11":"Day 11: Áî¢ÂìÅÈñãÁôº","12":"Day 12: ÁîüÁî¢ÁÆ°ÁêÜ","13":"Day 13: È°ßÂÆ¢ÊúçÂãô","14":"Day 14: ÊóÖÈÅäÂ∑ÆÊóÖ","15":"Day 15: ÂïÜÊ•≠Ë≤øÊòì","16":"Day 16: Áâ©ÊµÅÈÖçÈÄÅ","17":"Day 17: È£ØÂ∫óÈ§êÈ£≤","18":"Day 18: Ë≤°ÊîøÊúÉË®à","19":"Day 19: ÂÖ¨Âè∏ÂãïÂêë","20":"Day 20: ÂïÜÂãôÊúÉË≠∞","21":"Day 21: ‰∫§ÈÄöÈÅãËº∏","22":"Day 22: ÈäÄË°åÊ•≠Âãô","23":"Day 23: ÊäïË≥áÁêÜË≤°","24":"Day 24: Âª∫ÁØâ‰ΩèÂÆÖ","25":"Day 25: Áí∞Â¢ÉÊ∞£Ë±°","26":"Day 26: ÈÜ´ÁôÇÂÅ•Â∫∑","27":"Day 27: Á§æ‰∫§ÊñáÂåñ","28":"Day 28: ÈõªËÖ¶ÁßëÊäÄ","29":"Day 29: Ê≥ïÂæã‰∫ãÂãô","30":"Day 30: Á§æÊúÉÊîøÂ∫ú"};

    function init() {
        const saved = localStorage.getItem('toeicProV3');
        if(saved) try { db = {...db, ...JSON.parse(saved)}; } catch(e){}
        const daySel = document.getElementById('daySelector');
        const quizSel = document.getElementById('quizScopeSelector');
        const days = Object.keys(db).map(Number).sort((a,b)=>a-b);
        days.forEach(d => {
            daySel.add(new Option(themes[d]||`Day ${d}`, d));
            quizSel.add(new Option(`Day ${d} Ê∏¨È©ó`, d));
        });
        for(let i=1; i<=26; i+=5) {
            quizSel.add(new Option(`Day ${i}-${i+4} Ë§áÁøí`, `${i}-${i+4}`));
        }
        quizSel.add(new Option("ÂÖ®ÁØÑÂúçÁ∏ΩË§áÁøí", "all"));
        renderWords();
    }

    function renderWords() {
        const d = document.getElementById('daySelector').value;
        const list = document.getElementById('wordList');
        list.innerHTML = "";
        if(!db[d]) return;
        db[d].forEach((item, i) => {
            const li = document.createElement('li');
            li.className = "word-item";
            li.innerHTML = `
                <div class="word-header">
                    <span class="en-word">${item.w}</span>
                    <button class="btn-audio" onclick="playAudio('${item.w}')">üîä</button>
                    <span class="phonetic">${item.p || ""}</span>
                    <span class="pos-tag">${item.pos}</span>
                    <span class="stars">${"‚òÖ".repeat(item.s)}</span>
                    <span class="ch-meaning">${item.m}</span>
                </div>
                ${item.rel ? `<div class="word-rel">${item.rel}</div>` : ""}
                <div class="sentence-box">${item.ex}<br><span style="color:#888;">${item.ch}</span></div>`;
            list.appendChild(li);
        });
    }

    function playAudio(t) { window.speechSynthesis.cancel(); const u = new SpeechSynthesisUtterance(t); u.lang='en-US'; u.rate=0.8; window.speechSynthesis.speak(u); }

    function switchTab(t) {
        document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
        document.querySelectorAll('.view-section').forEach(x => x.classList.remove('active'));
        if(t==='study'){ document.querySelector('.tab:nth-child(1)').classList.add('active'); document.getElementById('studySection').classList.add('active'); }
        else { document.querySelector('.tab:nth-child(2)').classList.add('active'); document.getElementById('quizSection').classList.add('active'); }
    }

    let curQ = []; let userAns = {};
    function startQuiz() {
        let pool = []; const s = document.getElementById('quizScopeSelector').value;
        if(s==='all') Object.values(db).forEach(v=>pool=pool.concat(v));
        else if(s.includes('-')){ const [st,en]=s.split('-').map(Number); for(let i=st;i<=en;i++) if(db[i]) pool=pool.concat(db[i]); }
        else pool = db[s] || [];
        if(pool.length < 4) return alert("ÂñÆÂ≠ó‰∏çÂ§†");
        curQ = shuffle(pool).slice(0, 15).map(t => {
            const m = Math.random()>0.5?'s':'m';
            const dis = shuffle(pool.filter(w=>w.w!==t.w)).slice(0,3).map(d=>d.w);
            return {m, q: m==='s'?t.ex.replace(new RegExp(t.w+"(ing|ed|s|ly)?","gi"), "____"):`„Äå${t.m}„ÄçÁöÑÊÑèÊÄùÊòØÔºü`, c: t.w, opts: shuffle([t.w,...dis]), data: t};
        });
        userAns = {}; document.getElementById('quizStartScreen').style.display='none';
        document.getElementById('quizArea').style.display='block'; document.getElementById('quizArea').innerHTML="";
        document.getElementById('quizControls').style.display='block';
        curQ.forEach((q, i) => {
            const d = document.createElement('div'); d.className='quiz-card';
            d.innerHTML = `<div class="quiz-tag">${q.m==='s'?'ÊñáÊ≥ï':'ÈáãÁæ©'}</div><div>${i+1}. ${q.q}</div><div class="quiz-options">${q.opts.map(o=>`<div class="option-btn" onclick="userAns[${i}]='${o}'; this.parentElement.querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected')); this.classList.add('selected');">${o}</div>`).join('')}</div>`;
            document.getElementById('quizArea').appendChild(d);
        });
    }

    function submitQuiz() {
        let sc = 0; let html = "";
        curQ.forEach((q, i) => {
            const isC = userAns[i] === q.c; if(isC) sc++;
            html += `<div class="result-item ${isC?'correct':'wrong'}">Q${i+1}. ${q.q}<br>Ê≠£Ëß£: <b>${q.c}</b><br><small>${q.data.m} | ${q.data.ex}</small></div>`;
        });
        document.getElementById('scoreBoard').innerText = Math.round(sc/curQ.length*100);
        document.getElementById('correctCount').innerText = `${sc}/${curQ.length}`;
        document.getElementById('resultList').innerHTML = html;
        document.getElementById('quizArea').style.display='none'; document.getElementById('quizControls').style.display='none'; document.getElementById('quizResult').style.display='block';
        window.scrollTo(0,0);
    }
    function resetQuiz(){ document.getElementById('quizStartScreen').style.display='flex'; document.getElementById('quizResult').style.display='none'; }
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
    init();
</script>
</body>
</html>
